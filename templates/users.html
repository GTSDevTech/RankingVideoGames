{% extends 'base.html' %}
{% load static %}
{% load text_filters %}

{% block nav %}
  {% include 'includes/nav.html' %}
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/users.css' %}">
  <link rel="stylesheet" href="{% static 'css/admin_tabs.css' %}">
{% endblock %}

{% block body_class %}bg-user{% endblock %}

{% block body %}

<main class="user-content">
  {% include 'includes/admin_tabs.html' %}
  <div class="container-fluid px-5 user-panel-wrap">
    
    <section class="user-panel">

      <div class="user-toolbar">
        <div class="user-toolbar__left">
          <span class="user-dot"></span>
          <h2 class="user-title">Users Status</h2>
        </div>

        <div class="user-toolbar__center">
          <label class="user-search" aria-label="Buscar usuario">
            <span class="user-search__icon">⌕</span>
            <input id="searchInput" type="search" class="user-search__input"
                   placeholder="Buscar por username o email..." />
          </label>
        </div>

        <div class="user-toolbar__right">
          <div class="user-seg" role="tablist" aria-label="Filtro por género">
            <button class="user-seg__btn is-active" data-gender="all" type="button">All</button>
            <button class="user-seg__btn" data-gender="M" type="button">Men</button>
            <button class="user-seg__btn" data-gender="F" type="button">Women</button>
          </div>
        </div>
      </div>

      <div id="results" class="user-grid">
        {% for u in page_user %}
        <article class="gstats-row">

          <div class="gstats-rank" aria-hidden="true">
            <span class="gstats-rank__tag">TOP</span>
            <span class="gstats-rank__num">#{{ forloop.counter }}</span>
            {% if forloop.counter == 1 %}
              <i class="fa-solid fa-crown gstats-rank__crown" aria-hidden="true"></i>
            {% endif %}
          </div>

          <div class="gstats-cover">
            {% if r.cover %}
              <img src="{{ r.cover }}" alt="{{ r.name }}">
            {% else %}
              <div class="gstats-cover__ph">
                <i class="fa-solid fa-gamepad"></i>
              </div>
            {% endif %}
          </div>

          <div class="gstats-main">
            <div class="gstats-title">
              <span class="gstats-title__name">{{ r.name }}</span>
            </div>

            <div class="gstats-right">
              <div class="gstats-score">
                <div class="gstats-score__pts">
                  <i class="fa-solid fa-trophy"></i>
                  <span class="gstats-score__value">{{ r.points }}</span>
                  <span class="gstats-score__unit">pts</span>
                </div>

                <div class="gstats-score__meta">
                  <span class="gstats-mini">
                    <i class="fa-solid fa-users"></i>
                    <b>{{ r.appearances }}</b> rankings
                  </span>
                  <span class="gstats-mini">
                    <i class="fa-solid fa-star"></i>
                    Avg <b>#{{ r.pos_avg }}</b>
                  </span>
                </div>
              </div>

              <div class="gstats-posbar" aria-label="Distribución de posiciones">
                <span class="gpos gpos--p1"><i class="fa-solid fa-medal"></i> #1 <b>{{ r.pos_counts.1|default:0 }}</b></span>
                <span class="gpos gpos--p2"><i class="fa-solid fa-medal"></i> #2 <b>{{ r.pos_counts.2|default:0 }}</b></span>
                <span class="gpos gpos--p3"><i class="fa-solid fa-medal"></i> #3 <b>{{ r.pos_counts.3|default:0 }}</b></span>
                <span class="gpos gpos--p4"><i class="fa-solid fa-hashtag"></i> #4 <b>{{ r.pos_counts.4|default:0 }}</b></span>
                <span class="gpos gpos--p5"><i class="fa-solid fa-hashtag"></i> #5 <b>{{ r.pos_counts.5|default:0 }}</b></span>
              </div>
            </div>

          </div>

        </article>

        {% endfor %}
      </div>

    </section>
  </div>


</main>
  <script src="/static/js/user-table.js"></script>

{% endblock %}
